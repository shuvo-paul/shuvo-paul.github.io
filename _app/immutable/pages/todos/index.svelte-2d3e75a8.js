import{Y as W,S as ue,i as de,s as he,e as _,k as T,c as g,a as V,m as H,d as w,b as n,Z as ne,g as X,F as h,M as $,_ as ce,$ as pe,a0 as ve,L as be,a1 as re,N as fe,t as me,U as _e,h as ge,a2 as ke,q as we,r as ye,p as Ee,o as xe,a3 as Ce,n as Me}from"../../chunks/index-0c08dead.js";import{c as P}from"../../chunks/singletons-d1fb5791.js";P.disable_scroll_handling;P.goto;const Te=P.invalidate;P.prefetch;P.prefetch_routes;P.before_navigate;P.after_navigate;function z(i,{pending:e,error:t,result:o}={}){let c;async function m(v){const a=c={};v.preventDefault();const u=new FormData(i);e&&e({data:u,form:i});try{const p=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:u});if(a!==c)return;if(p.ok){o&&o({data:u,form:i,response:p});const s=new URL(i.action);s.search=s.hash="",Te(s.href)}else t?t({data:u,form:i,error:null,response:p}):console.error(await p.text())}catch(p){if(t&&p instanceof Error)t({data:u,form:i,error:p,response:null});else throw p}}return i.addEventListener("submit",m),{destroy(){i.removeEventListener("submit",m)}}}function ie(i){const e=i-1;return e*e*e+1}function se(i,{delay:e=0,duration:t=400,easing:o=ie,start:c=0,opacity:m=0}={}){const v=getComputedStyle(i),a=+v.opacity,u=v.transform==="none"?"":v.transform,p=1-c,s=a*(1-m);return{delay:e,duration:t,easing:o,css:(x,y)=>`
			transform: ${u} scale(${1-p*y});
			opacity: ${a-s*y}
		`}}function He(i,{from:e,to:t},o={}){const c=getComputedStyle(i),m=c.transform==="none"?"":c.transform,[v,a]=c.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*v/t.width-(t.left+v),p=e.top+e.height*a/t.height-(t.top+a),{delay:s=0,duration:x=C=>Math.sqrt(C)*120,easing:y=ie}=o;return{delay:s,duration:W(x)?x(Math.sqrt(u*u+p*p)):x,easing:y,css:(C,b)=>{const k=b*u,N=b*p,l=C+b*e.width/t.width,r=C+b*e.height/t.height;return`transform: ${m} translate(${k}px, ${N}px) scale(${l}, ${r});`}}}function ae(i,e,t){const o=i.slice();return o[3]=e[t],o[4]=e,o[5]=t,o}function le(i,e){let t,o,c,m,v,a,u,p,s,x,y,C,b,k,N,l,r,d,B,j,I,U,A,R,Y,L,q,S,G,O,J,K=Me,M,Q,ee;function te(...E){return e[1](e[3],e[4],e[5],...E)}function oe(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=_("div"),o=_("form"),c=_("input"),v=T(),a=_("input"),p=T(),s=_("button"),C=T(),b=_("form"),k=_("input"),l=T(),r=_("input"),B=T(),j=_("button"),I=T(),U=_("form"),A=_("input"),Y=T(),L=_("button"),G=T(),this.h()},l(E){t=g(E,"DIV",{class:!0});var f=V(t);o=g(f,"FORM",{action:!0,method:!0});var F=V(o);c=g(F,"INPUT",{type:!0,name:!0,class:!0}),v=H(F),a=g(F,"INPUT",{type:!0,name:!0,class:!0}),p=H(F),s=g(F,"BUTTON",{class:!0,"aria-label":!0}),V(s).forEach(w),F.forEach(w),C=H(f),b=g(f,"FORM",{class:!0,action:!0,method:!0});var D=V(b);k=g(D,"INPUT",{type:!0,name:!0,class:!0}),l=H(D),r=g(D,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),B=H(D),j=g(D,"BUTTON",{class:!0,"aria-label":!0}),V(j).forEach(w),D.forEach(w),I=H(f),U=g(f,"FORM",{action:!0,method:!0});var Z=V(U);A=g(Z,"INPUT",{type:!0,name:!0,class:!0}),Y=H(Z),L=g(Z,"BUTTON",{class:!0,"aria-label":!0}),V(L).forEach(w),Z.forEach(w),G=H(f),f.forEach(w),this.h()},h(){n(c,"type","hidden"),n(c,"name","uid"),c.value=m=e[3].uid,n(c,"class","svelte-1orubnh"),n(a,"type","hidden"),n(a,"name","done"),a.value=u=e[3].done?"":"true",n(a,"class","svelte-1orubnh"),n(s,"class","toggle svelte-1orubnh"),n(s,"aria-label",x="Mark todo as "+(e[3].done?"not done":"done")),n(o,"action","/todos?_method=PATCH"),n(o,"method","post"),n(k,"type","hidden"),n(k,"name","uid"),k.value=N=e[3].uid,n(k,"class","svelte-1orubnh"),n(r,"aria-label","Edit todo"),n(r,"type","text"),n(r,"name","text"),r.value=d=e[3].text,n(r,"class","svelte-1orubnh"),n(j,"class","save svelte-1orubnh"),n(j,"aria-label","Save todo"),n(b,"class","text svelte-1orubnh"),n(b,"action","/todos?_method=PATCH"),n(b,"method","post"),n(A,"type","hidden"),n(A,"name","uid"),A.value=R=e[3].uid,n(A,"class","svelte-1orubnh"),n(L,"class","delete svelte-1orubnh"),n(L,"aria-label","Delete todo"),L.disabled=q=e[3].pending_delete,n(U,"action","/todos?_method=DELETE"),n(U,"method","post"),n(t,"class","todo svelte-1orubnh"),ne(t,"done",e[3].done),this.first=t},m(E,f){X(E,t,f),h(t,o),h(o,c),h(o,v),h(o,a),h(o,p),h(o,s),h(t,C),h(t,b),h(b,k),h(b,l),h(b,r),h(b,B),h(b,j),h(t,I),h(t,U),h(U,A),h(U,Y),h(U,L),h(t,G),M=!0,Q||(ee=[$(y=z.call(null,o,{pending:te})),$(z.call(null,b)),$(S=z.call(null,U,{pending:oe}))],Q=!0)},p(E,f){e=E,(!M||f&1&&m!==(m=e[3].uid))&&(c.value=m),(!M||f&1&&u!==(u=e[3].done?"":"true"))&&(a.value=u),(!M||f&1&&x!==(x="Mark todo as "+(e[3].done?"not done":"done")))&&n(s,"aria-label",x),y&&W(y.update)&&f&1&&y.update.call(null,{pending:te}),(!M||f&1&&N!==(N=e[3].uid))&&(k.value=N),(!M||f&1&&d!==(d=e[3].text)&&r.value!==d)&&(r.value=d),(!M||f&1&&R!==(R=e[3].uid))&&(A.value=R),(!M||f&1&&q!==(q=e[3].pending_delete))&&(L.disabled=q),S&&W(S.update)&&f&1&&S.update.call(null,{pending:oe}),f&1&&ne(t,"done",e[3].done)},r(){J=t.getBoundingClientRect()},f(){ce(t),K(),pe(t,J)},a(){K(),K=ve(t,J,He,{duration:200})},i(E){M||(E&&be(()=>{O||(O=re(t,se,{start:.7},!0)),O.run(1)}),M=!0)},o(E){E&&(O||(O=re(t,se,{start:.7},!1)),O.run(0)),M=!1},d(E){E&&w(t),E&&O&&O.end(),Q=!1,fe(ee)}}}function Ue(i){let e,t,o,c,m,v,a,u,p,s=[],x=new Map,y,C,b,k=i[0];const N=l=>l[3].uid;for(let l=0;l<k.length;l+=1){let r=ae(i,k,l),d=N(r);x.set(d,s[l]=le(d,r))}return{c(){e=_("meta"),t=T(),o=_("div"),c=_("h1"),m=me("Todos"),v=T(),a=_("form"),u=_("input"),p=T();for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){const r=_e('[data-svelte="svelte-aw2gey"]',document.head);e=g(r,"META",{name:!0,content:!0,class:!0}),r.forEach(w),t=H(l),o=g(l,"DIV",{class:!0});var d=V(o);c=g(d,"H1",{});var B=V(c);m=ge(B,"Todos"),B.forEach(w),v=H(d),a=g(d,"FORM",{class:!0,action:!0,method:!0});var j=V(a);u=g(j,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),j.forEach(w),p=H(d);for(let I=0;I<s.length;I+=1)s[I].l(d);d.forEach(w),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(e,"class","svelte-1orubnh"),n(u,"name","text"),n(u,"aria-label","Add todo"),n(u,"placeholder","+ tap to add a todo"),n(u,"class","svelte-1orubnh"),n(a,"class","new svelte-1orubnh"),n(a,"action","/todos"),n(a,"method","post"),n(o,"class","todos svelte-1orubnh")},m(l,r){h(document.head,e),X(l,t,r),X(l,o,r),h(o,c),h(c,m),h(o,v),h(o,a),h(a,u),h(o,p);for(let d=0;d<s.length;d+=1)s[d].m(o,null);y=!0,C||(b=$(z.call(null,a,{result:Ve})),C=!0)},p(l,[r]){if(r&1){k=l[0],xe();for(let d=0;d<s.length;d+=1)s[d].r();s=ke(s,r,N,1,l,k,x,o,Ce,le,null,ae);for(let d=0;d<s.length;d+=1)s[d].a();we()}},i(l){if(!y){for(let r=0;r<k.length;r+=1)ye(s[r]);y=!0}},o(l){for(let r=0;r<s.length;r+=1)Ee(s[r]);y=!1},d(l){w(e),l&&w(t),l&&w(o);for(let r=0;r<s.length;r+=1)s[r].d();C=!1,b()}}}const Ve=async({form:i})=>{i.reset()};function Ne(i,e,t){let{todos:o}=e;const c=(v,a,u,{data:p})=>{t(0,a[u].done=!!p.get("done"),o)},m=(v,a,u)=>t(0,a[u].pending_delete=!0,o);return i.$$set=v=>{"todos"in v&&t(0,o=v.todos)},[o,c,m]}class Le extends ue{constructor(e){super(),de(this,e,Ne,Ue,he,{todos:0})}}export{Le as default};
